/*!
 * fastClick
 * Copyright (C) KAYAC Inc. | http://www.kayac.com/
 * Dual licensed under the MIT <http://www.opensource.org/licenses/mit-license.php>
 * and GPL <http://www.opensource.org/licenses/gpl-license.php> licenses.
 * Date: 2012-07-06
 * @author @kyo_ago
 * @version 1.0.0
 * @see http://github.com/kyo-ago/fastClick
 */

var b=!1,h=this,i=this.document;function j(a,c){if("ontouchstart"in h)return h.addEventListener("click",j.windowClick,!0),j.init(a,c),j}j.coords=[];j.e=2E3;j.windowClick=function(a){var c=a.target["data-fc-store"];if(!c||!c.a)for(var d=a.changedTouches?a.changedTouches[0]:a,c=d.clientX,d=d.clientY,e=j.coords,f=0,g=e.length;f<g;f+=2){var k=Math.abs(d-e[f+1]);if(25>Math.abs(c-e[f])&&25>k){a.stopPropagation();a.preventDefault();break}}};
j.init=function(a,c){for(var d=a?i.querySelectorAll(a):[i],e=0,f=d.length;e<f;++e){var g=d[e];c?(g["data-ignore-selector"]=c,i.documentElement.webkitMatchesSelector&&(g===h||g===i||g===i.body)?g.addEventListener("touchstart",j.matchesSelectorHandler,b):g.addEventListener("touchstart",j.querySelectorHandler,b)):g.addEventListener("touchstart",j.onTouchStart,b)}};j.matchesSelectorHandler=function(a){if(!a.target.webkitMatchesSelector(this["data-ignore-selector"]))j.onTouchStart(a)};
j.querySelectorHandler=function(a){for(var c=this.querySelectorAll(this["data-ignore-selector"]),d=h.d?h.d.DOCUMENT_POSITION_CONTAINED_BY:void 0,e=0,f=c.length;e<f;++e){var g=c[e].compareDocumentPosition(a.target);if(0===g||g&d)return}j.onTouchStart(a)};j.onTouchStart=function(a){var c=a.target;c.addEventListener("touchmove",j.onTouchMove,b);c.addEventListener("touchend",j.onTouchEnd,b);c=c["data-fc-store"]=c["data-fc-store"]||{};a=a.touches[0];c.b=a.clientX;c.c=a.clientY};
j.onTouchMove=function(a){var c=a.target["data-fc-store"];if(c){var d=a.target,a=a.touches[0],e=Math.abs(a.clientY-c.c);if(10<Math.abs(a.clientX-c.b)||10<e)d.removeEventListener("touchend",j.onTouchEnd,b),d.removeEventListener("touchmove",j.onTouchMove,b)}};
j.onTouchEnd=function(a){var c=a.target;c.removeEventListener("touchend",j.onTouchEnd,b);c.removeEventListener("touchmove",j.onTouchMove,b);var d=c["data-fc-store"];if(!d||!d.a){d.a=!0;var e=i.createEvent("MouseEvents"),f=a.changedTouches[0];e.initMouseEvent("click",a.bubbles,a.cancelable,a.view,a.detail,f.screenX,f.screenY,f.clientX,f.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,null);c.dispatchEvent(e);d.a=b;j.coords.push(d.b,d.c);j.f()}};
j.f=function(){setTimeout(function(){j.coords.splice(0,2)},j.e)};this.fastClick=j;